<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ product['name'] }} - Details</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
<header>
    <a href="{{ url_for('home') }}" class="home-icon">üè†</a>
    <div class="menu-icon">‚ò∞</div>
</header>

<main class="dashboard" style="max-width:1200px;">
    <div class="product-detail" style="grid-column: 1 / -1; display:grid; grid-template-columns: 360px 1fr; gap: 24px; align-items:start;">
        <div>
            <img src="{{ product['image_url'] or url_for('static', filename='images/placeholder.jpg') }}" alt="{{ product['name'] }}" style="width:100%; height:auto; border-radius: 8px; object-fit:cover;">
        </div>
        <div>
            <div style="display:flex; justify-content:space-between; align-items:start; gap:16px;">
                <div>
                    <h1 style="margin:0 0 4px 0;">{{ product['name'] }}</h1>
                    <div style="color:#666; margin-bottom:8px;">{{ product['category'] }}</div>
                    <div style="font-weight:600; margin-bottom:12px;">${{ '%.2f'|format(product['price']) }}</div>
                    <p style="margin: 8px 0 12px 0;">{{ product['description'] or 'No short description.' }}</p>
                </div>
                <form method="post" action="{{ url_for('add_to_cart') }}">
                    <input type="hidden" name="product_id" value="{{ product['id'] }}">
                    {% if product['stock'] > 0 %}
                    <button type="submit" class="add-to-cart">Add to cart</button>
                    {% else %}
                    <button type="button" class="add-to-cart" disabled>Out of stock</button>
                    {% endif %}
                </form>
            </div>
            <div style="margin-top:16px;">
                <h3 style="margin: 0 0 8px 0;">Detailed description</h3>
                <p style="white-space:pre-wrap;">{{ detailed_description }}</p>
            </div>
        </div>
    </div>

    {% if youtube_videos %}
    <section style="grid-column: 1 / -1; margin-top: 32px;">
        <h2 style="margin-bottom: 20px; font-size: 1.5rem;">Product Demos</h2>
        <div class="video-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 24px; margin-top: 16px;">
            {% for video in youtube_videos %}
            <div class="video-card" style="background: #fff; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                <div class="video-container" style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
                    <iframe 
                        style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none;"
                        src="https://www.youtube.com/embed/{{ video.url.split('v=')[-1] }}" 
                        title="{{ video.title }}"
                        frameborder="0" 
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                        allowfullscreen>
                    </iframe>
                </div>
                <div class="video-info" style="padding: 16px;">
                    <h3 style="margin: 0 0 8px 0; font-size: 1rem; line-height: 1.4;">
                        <a href="{{ video.url }}" target="_blank" style="color: #1a1a1a; text-decoration: none;">
                            {{ video.title }}
                        </a>
                    </h3>
                    <div style="display: flex; justify-content: space-between; color: #666; font-size: 0.85rem;">
                        <span>{{ video.channel }}</span>
                        <span>{{ video.duration }}</span>
                    </div>
                    <div style="color: #666; font-size: 0.8rem; margin-top: 4px;">
                        {{ "{:,}".format(video.views) }} views ‚Ä¢ {{ video.published }}
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </section>
    {% endif %}
</main>
</body>
</html>
